@using BioEngine.Core.Comments
@using BioEngine.Core.Site.Model
@model BioEngine.Core.Site.Model.ListViewModel<BioEngine.Core.Entities.Post>
@inject ICommentsProvider CommentsProvider
@{
    // ReSharper disable once CoVariantArrayConversion
    var comments = await CommentsProvider.GetCommentsDataAsync(Model.Items);
}
@foreach (var item in Model.Items)
{
    var postComments = comments[item.Id];
    await Html.RenderPartialAsync("Post", new PostViewModel(Model.GetContext(), item, postComments.count, postComments.uri));
}
<vc:pager page="@Model.Page" total-items="@Model.TotalItems" items-per-page="@Model.ItemsPerPage"></vc:pager>
